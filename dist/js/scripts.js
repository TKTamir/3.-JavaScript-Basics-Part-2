const pokemonRepository=function(){let j=[],a=$("input");a.on("input",f);let k=nextURL=null,b=document.getElementById("prevbtn"),c=document.getElementById("nextbtn");function l(a){if(a){let b=document.querySelector(".pokemon-list");b.innerHTML="",pokemonRepository.loadList(a).then(function(){pokemonRepository.getAll().forEach(function(a){pokemonRepository.addListItem(a)})})}}function d(a){a.name&&a.detailsUrl?j.push(a):console.log("Invalid Pokemon entry")}function e(){return j}function f(){let b=$("input").val(),a=$("li");a.each(function(){let a=$(this),c=a.text();c.startsWith(b)?a.show():a.hide()})}function g(a){let b=a.detailsUrl;return fetch(b).then(function(a){return a.json()}).then(function(b){a.spriteUrl=b.sprites.front_default,a.svgUrl=b.sprites.other.dream_world.front_default,a.height=b.height,a.types=b.types;let c=[];b.types.forEach(a=>c.push(a.type.name)),a.types=c}).catch(function(a){console.error(a)})}function h(a){g(a).then(function(){i(a)})}function i(a){let c=$(".modal-title"),b=$(".modal-body");c.empty(),b.empty();let d=$(`<h1>${a.name}</h1>`),e=$(`<img class="modal-sprite" src="${a.spriteUrl}" alt="Sprite of Pokemon">`),f=$(`<p class="mt-2 ml-4 mb-1">Height: ${a.height}</p>`),g=$(`<p class="mt-2 ml-4 mb-1">Types: ${a.types.join(", ")}</p>`),h=$(`<img class="modal-img mx-auto" src="${a.svgUrl}" alt="SVG illustration of Pokemon">`);c.append(d),c.append(e),b.append(f),b.append(g),b.append(h)}return b.addEventListener("click",a=>{l(k)}),c.addEventListener("click",a=>{l(nextURL)}),{add:d,getAll:e,addListItem:function(d){let c=document.querySelector(".pokemon-list"),b=document.createElement("li"),a=document.createElement("button");a.innerText=d.name,a.addEventListener("click",function(a){h(d),a.target.blur}),a.classList.add("button-class","btn","btn-primary"),a.classList.add("btn-block","btn-outline-primary","m-1"),a.classList.add("bg-primary","text-capitalize"),a.setAttribute("data-toggle","modal"),a.setAttribute("data-target",".modal"),c.classList.add("pagination"),b.classList.add("group-list-item","col-sm-9","page-item"),b.appendChild(a),c.appendChild(b)},showDetails:h,loadList:function(a){return fetch(a).then(function(a){return a.json()}).then(function(a){k=a.previous,nextURL=a.next,j.length=0,k?b.disabled=!1:b.disabled=!0,nextURL?c.disabled=!1:c.disabled=!0,a.results.forEach(function(a){let b={name:a.name,detailsUrl:a.url};d(b),console.log(b)})}).catch(function(a){console.error(a)})},loadDetails:g,showModal:i,filterList:f}}(),API_URL="https://pokeapi.co/api/v2/pokemon/?limit=50";pokemonRepository.loadList("https://pokeapi.co/api/v2/pokemon/?limit=50").then(function(){pokemonRepository.getAll().forEach(function(a){pokemonRepository.addListItem(a)})})